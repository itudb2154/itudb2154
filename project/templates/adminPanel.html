{% extends 'layout.html' %}

{% block head_ext %}
    <title>Admin Panel</title>
{% endblock head_ext %}


{% block content %}

<div class="container-xxl">

    <div class="row">
            
        <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
            <div class="position-sticky pt-3">
              <ul class="nav flex-column">
                
                <li class="nav-item">
                    <a class="nav-link" href="?user=true">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-users" aria-hidden="true"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                      Users
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="?meal=true">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-cart" aria-hidden="true"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                      Meals
                    </a>
                  </li>
              </ul>
            </div>
          </nav>
          {%if userSelected%}
          <div class="table-responsive mt-5">
                <table class="table table-striped table-sm">
                <thead>
                    <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Name</th>
                    <th scope="col">Surname</th>
                    <th scope="col">Mail</th>
                    <th scope="col">Password</th>
                    <th scope="col">Role</th>
                    </tr>
                </thead>
                <tbody>
                    {%if allUsers%}
                    {%for key, user in allUsers%}
                    <tr>
                    <td>{{user.id}}</td>
                    <td>{{user.name}}</td>
                    <td>{{user.surname}}</td>
                    <td>{{user.mail}}</td>
                    <td>{{user.password}}</td>
                    <td>{{user.role_id}}</td>
                    <td>
                        <form action="/adminPanel" method="GET">
                            <button type="submit" name="delete-user" value="{{key}}" class="btn btn-sm btn-danger">Delete</button>
                        </form>
                    </td>
                    </tr>
                    {%endfor%}
                    {%endif%}

                </tbody>
                </table>
            </div>
            {%endif%}
            {%if mealSelected%}
            <div class="table-responsive mt-5">
                <table class="table table-striped table-sm">
                <thead>
                    <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Name</th>
                    <th scope="col">Category</th>
                    <th scope="col">Photo</th>
                    <th scope="col">Cusine</th>
                    <th scope="col">Country</th>
                    </tr>
                </thead>
                <tbody>
                    {%if allMeals%}
                    {%for key, meal in allMeals%}
                    <tr>
                    <td>{{key}}</td>
                    <td>{{meal.name}}</td>
                    <td>{{meal.category_name}}</td>
                    <td>{{meal.photo_url}}</td>
                    <td>{{meal.coisine_name}}</td>
                    <td>{{meal.country_name}}</td>
                    <td>
                        
                        <a href="?edit=meal&meal={{key}}"><button type="submit" class="btn btn-sm btn-outline-secondary ">Edit</button></a>
                        <form method="POST">
                            <button type="submit" name="delete-meal" value="{{key}}" class="btn btn-sm btn-danger">Delete</button>
                        </form>
                    </td>
                    </tr>
                    {%endfor%}
                    {%endif%}

                </tbody>
                </table>
            </div>
            {%endif%}
        </div> 
</div>

  {% endblock %}