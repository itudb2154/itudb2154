{% extends 'layout.html' %}

{% block head_ext %}
    <title>Admin Panel</title>
{% endblock head_ext %}


{% block content %}

<div class="container-xxl">

    <div class="row">
            
        <nav id="sidebarMenu" class="col-2 d-md-block sidebar collapse" >
            <div class="position-sticky py-3 px-3" style="background-color: #5F6368;">
              <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link" style="color:white" href="?user=true">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-users" aria-hidden="true"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                      Users
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" style="color:white" href="?meal=true">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-cart" aria-hidden="true"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                      Meals
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" style="color:white" href="?ingredient=true">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-layers" aria-hidden="true"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>
                      Ingredients
                    </a>
                  </li>
              </ul>
            </div>
          </nav>
          {%if userSelected%}
          <div class="table-responsive col-10 mt-2">
                <table class="table table-striped table-sm mt-5">
                <thead>
                    <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Name</th>
                    <th scope="col">Surname</th>
                    <th scope="col">Mail</th>
                    <th scope="col">Password</th>
                    <th scope="col">Role</th>
                    </tr>
                </thead>
                <tbody>
                    {%if allUsers%}
                    {%for key, user in allUsers%}
                    <tr>
                    <td>{{user.id}}</td>
                    <td>{{user.name}}</td>
                    <td>{{user.surname}}</td>
                    <td>{{user.mail}}</td>
                    <td>{{user.password}}</td>
                    <td>{{user.role_id}}</td>
                    <td>
                        <form action="/adminPanel" method="GET">
                            <button type="submit" name="delete-user" value="{{key}}" class="btn btn-sm btn-danger">Delete</button>
                        </form>
                    </td>
                    </tr>
                    {%endfor%}
                    {%endif%}

                </tbody>
                </table>
            </div>
            {%endif%}
            {%if mealSelected%}
            <div class="table-responsive col-10 mt-2">
                <div class="row row-cols-1 row-cols-sm-4 d-flex justify-content-center mt-5">
                    <form method="POST" class="signin-form">
                        <div class="form-group me-2">
                        <button type="submit" name="button" value="addMeal" class="form-control btn btn-dark submit px-3">
                            Add meal
                        </button>
                        </div>
                    </form>
                </div>
                <table class="table table-striped table-sm mt-5">
                <thead>
                    <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Name</th>
                    <th scope="col">Category</th>
                    <th scope="col">Photo</th>
                    <th scope="col">Cusine</th>
                    <th scope="col">Country</th>
                    </tr>
                </thead>
                <tbody>
                    {%if allMeals%}
                    {%for key, meal in allMeals%}
                    <tr>
                    <td>{{key}}</td>
                    <td>{{meal.name}}</td>
                    <td>{{meal.category_name}}</td>
                    <td><a href="{{meal.photo_url}}">Link</a></td>
                    <td>{{meal.coisine_name}}</td>
                    <td>{{meal.country_name}}</td>
                    <td>
                        <form method="POST"></form>
                        <a href="?edit=meal&meal={{key}}"><button type="button" class="btn btn-sm btn-outline-secondary ">Edit</button></a>
                            <button type="submit" name="delete-meal" value="{{key}}" class="btn btn-sm btn-danger">Delete</button>
                        </form>
                    </td>
                    </tr>
                    {%endfor%}
                    {%endif%}

                </tbody>
                </table>
            </div>
            {%endif%}



            {%if ingredientSelected%}
            <div class="table-responsive col-10">
                <div class="row row-cols-1 row-cols-sm-4 d-flex justify-content-center mt-5">
                    <form method="POST" class="signin-form">
                        <div class="form-group me-2">
                        <button type="submit" name="button" value="addIngredient" class="form-control btn btn-dark submit px-3">
                            Add Ingredient
                        </button>
                        </div>
                    </form>
                </div>
                <table class="table table-striped table-sm mt-5">
                <thead>
                    <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Name</th>
                    <th scope="col">Protein</th>
                    <th scope="col">Calorie</th>
                    <th scope="col">Fat</th>
                    <th scope="col">Type</th>
                    </tr>
                </thead>
                <tbody>
                    {%if allIngredients%}
                    {%for key, ingredient in allIngredients%}
                    <tr>
                    <td>{{key}}</td>
                    <td>{{ingredient.name}}</td>
                    <td>{{ingredient.protein}}</td>
                    <td>{{ingredient.calorie}}</td>
                    <td>{{ingredient.fat}}</td>
                    <td>{{ingredient.ingType}}</td>
                    <td>
                        <form method="POST"></form>
                            <a href="?edit=ingredient&ingredient={{key}}"><button type="button" class="btn btn-sm btn-outline-secondary ">Edit</button></a>
                            <button type="submit" name="delete-ingredient" value="{{key}}" class="btn btn-sm btn-danger">Delete</button>
                        </form>
                    </td>
                    </tr>
                    {%endfor%}
                    {%endif%}

                </tbody>
                </table>
            </div>
            {%endif%}



        </div> 
</div>

  {% endblock %}