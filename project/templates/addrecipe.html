{% extends 'layout.html' %}
{% block content %}

      <div class="container" style="width:25%">
        <form action="/addrecipe" method="POST" class="signin-form mt-5">
            <label class="label" for="meal">Meal</label>
            <select class="form-select" name="meal" aria-label="Default select example">
                <option selected>Select a meal from the dropdown</option>
                {%if meals%}
                {%for key, meal in meals%}
                <option value="{{meal.name}}">{{meal.name}}</option>
                {%endfor%}
                {%endif%}
            </select>

            <div class="form-group mb-3">
              <label class="label" for="name">Name</label>
              <input type="text" name="name" class="form-control" placeholder="Name" required="">
            </div>
            <div class="form-group mb-3">
                <label class="label" for="instruction">Instruction</label>
                <input type="text" name="instruction" class="form-control" placeholder="Instruction" required="">
            </div>
            <div class="form-group mb-3">
                <label class="label" for="portion">Portion</label>
                <input type="text" name="portion" class="form-control" placeholder="Portion" required="">
            </div>
            <div class="border border-dark p-2">
              <div class="ingredient border border-dark p-2 m-2">
                <select class="form-select" name="ingredient" aria-label="Default select example">
                  <option selected>Select an ingredient from the dropdown</option>
                  {%if ingredients%}
                  {%for key, ingredient in ingredients%}
                  <option value="{{ingredient.name}}">{{ingredient.name}}</option>
                  {%endfor%}
                  {%endif%}
                </select>
                <div class="form-group mb-3">
                  <label class="label" for="portion">Measure</label>
                    <input type="text" name="measure" class="form-control" placeholder="Measure" required="">
                </div>
              </div>
              
              <div class="form-group me-2 mt-2">
                <button type="button" id="addIngredient" class="form-control btn btn-dark submit px-3">
                  Add more ingredient
                </button>
              </div>
            </div>
            <div class="form-group mb-3">
                <label class="label" for="drink_alternate">Drink alternate</label>
                <input type="text" name="drink_alternate" class="form-control" placeholder="drink_alternate" required="">
            </div>
            <div class="form-group mb-3">
                <label class="label" for="video_url">video url</label>
                <input type="text" name="video_url" class="form-control" placeholder="video_url" required="">
            </div>
            {%if error%}
            <div class="form-group">
                <label class="alert alert-danger" style="padding:7px; width:100%; text-align:center; margin-top:15px;">Incorrect username or password!</label> 
            </div>
            {%endif%}
            <div class="form-group">
                <button type="submit" class="form-control btn btn-dark submit px-3">Add Recipe</button>
            </div>
            <div class="form-group d-md-flex">
                <!--<div class="w-50 text-left">
                    <label class="checkbox-wrap checkbox-primary mb-0">Remember Me
                                <input type="checkbox" checked>
                                <span class="checkmark"></span>
                        </label>
                    </div>-->
            </div>
            </form>
      </div>
    <script>
      document.getElementById("addIngredient").onclick = function() {
        var container = document.querySelectorAll('.ingredient');
        var section = document.querySelector('.ingredient');
        var last = container[container.length-1];
        section.parentNode.insertBefore(section.cloneNode(true), last.nextSibling);
        
      }
    </script>
{% endblock %}